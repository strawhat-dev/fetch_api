let e$1={configurable:!1,enumerable:!1,writable:!1},a$1={create:e$1,with:e$1,set:e$1,use:e$1,fetch:e$1,get:e$1,post:e$1,put:e$1,patch:e$1,delete:e$1,trace:e$1,connect:e$1,options:e$1,head:e$1},t=["get","post","put","patch","delete","trace","connect","options","head"],r$1=/* @__PURE__ */new Set(["ArrayBuffer","FormData","ReadableStream","SharedArrayBuffer","URLSearchParams"]),i$2=/* @__PURE__ */new Set(["Date","Error","Headers","RegExp","Request","Response","URL","URLSearchParams"]),o$4=/* @__PURE__ */new Set(["ArrayBuffer","AudioData","Blob","CropTarget","CryptoKey","DOMException","DOMMatrix","DOMMatrixReadOnly","DOMPoint","DOMPointReadOnly","DOMQuad","DOMRect","DOMRectReadOnly","File","FileList","FileSystemDirectoryHandle","FileSystemFileHandle","FileSystemHandle","GPUCompilationInfo","GPUCompilationMessage","ImageBitmap","ImageData","Map","RTCCertificate","Set","SharedArrayBuffer","VideoFrame"]);let o$3=e=>!!e&&"Object"===f$1(e),i$1=e=>!!e&&"Request"===f$1(e),n$2=e=>!!e&&"Promise"===f$1(e),l$2=e=>!e||"object"!=typeof e&&"function"!=typeof e,s$1=e=>!!e?.ELEMENT_NODE&&"function"==typeof e.cloneNode,u$1=e=>null!=e&&["String","File","Blob"].includes(f$1(e)),c$2=t=>u$1(t)||ArrayBuffer.isView(t)||r$1.has(f$1(t)),f$1=e=>null==e||Number.isNaN(e)?"null":e.constructor?.name||b.toString.call(e).slice(8,-1),a=e=>null==e?null:"string"==typeof e?JSON.stringify(e):l$2(e)?e.toString():JSON.stringify(j(e)),y$1=e=>{if(!e)return {};for(let t of m$1(e))delete e[t];return e},N=e=>h$1(e)?e:d$1(e)?E(e):s$1(e)?e.cloneNode(!0):i$2.has(f$1(e))?new e.constructor(e):o$4.has(f$1(e))||ArrayBuffer.isView(e)?S(e):p$1(e).reduce((e,[t,r])=>(h$1(r)||(r=N(r)),e[t]=r,e),{}),{isArray:d$1}=Array,{keys:m$1,entries:p$1,prototype:b,fromEntries:g}=Object,S=globalThis.structuredClone||(e=>e),h$1=e=>!e||"object"!=typeof e,j=e=>d$1(e)||!e?.[Symbol.iterator]?e:"Map"===f$1(e)?g(e):[...e],E=e=>{let t=e.length,r=Array(t);for(let o=0;o<t;++o){let t=e[o];h$1(t)||(t=N(t)),r[o]=t;}return r};let{values:e,defineProperty:r}=Object,n$1=async(r,n)=>{let{transform:a,onreq:c,onres:s,onError:u,...f}=n,l={input:r,...f};"function"==typeof c&&c(l);let h=await fetch(r,f).catch(i(l,u)),p=s?.await||s;if(h.ok){if("function"==typeof p){let e=p(l,h),r=!n$2(e)||"await"in s?await e:void 0;if(void 0!==r)return r}}else {if("error"in h)return h;let t={status:h.status,statusText:h.statusText},r=Error(e(t).filter(Boolean).join(" "),{cause:t});return i(h,u)(r)}return o$2(h,a).catch(i(h,u))},o$2=async(t,e)=>{if(!e||!t.body||t.bodyUsed)return t;let r=t.headers.get("content-type")?.toLowerCase();if(r?.includes("application/json"))return t.json();let n=await t.text();try{return JSON.parse(n)}catch(t){if(!(t instanceof SyntaxError))throw t;return n}},i=(t,e)=>("function"==typeof e||(e=t=>t),n=>{(n||="Unknown exception while fetching...")instanceof Error||(n=Error(n,{cause:t}));let o=setTimeout(()=>console.error("Unhandled (in fetched-api)",n.stack||n),10);return e(r(t,"error",{enumerable:!0,configurable:!0,get:()=>(clearTimeout(o),n)}))??t});let{isArray:s}=Array,{entries:n,assign:o$1}=Object,d=(e,r,a)=>{e||="",r||="";let s=(e.url??e.toString()).trim();(!r||/^https?:\/\//i.test(s))&&([r,s]=[s,""]),r.endsWith("/")&&(r=r.slice(0,-1)),s.startsWith("/")&&(s=s.slice(1));let n=new URL(r+"/"+s);return a?.entries?.().forEach(e=>n.searchParams.append(...e)),i$1(e)?new Request(n,e):n},p=(r,...t)=>{let s=o$1({method:r,transform:"GET"===r||"POST"===r||"OPTIONS"===r},...t,c$1(t),("GET"===r||"HEAD"===r)&&{body:null});if(null==s.body||c$2(s.body))return s;let n=s.headers||=new Headers,d=n.get("content-type")?.toLowerCase();return d||n.set("content-type","application/json"),s.body=d?.includes("multipart/form-data")?(n.delete("content-type"),l$1(s.body)):d?.includes("application/x-www-form-urlencoded")?new URLSearchParams(s.body):a(s.body),s},l$1=e=>("object"==typeof(e??={})||(e={data:e}),n(e).reduce((e,[t,s])=>(u$1(s)||(s=a(s)),e.append(t,s),e),new FormData)),c$1=e=>{let r={};for(let{params:t,headers:a,appendHeaders:o}of e)t&&(r.params?(s(t)||(t=new URLSearchParams(t).entries()),t.forEach(e=>r.params.set(...e))):r.params=new URLSearchParams(t)),a&&(r.headers?(s(a)||(a=n(a)),a.forEach(e=>r.headers.set(...e))):r.headers=new Headers(a)),o&&(r.headers?(s(o)||(o=n(o)),o.forEach(e=>r.headers.append(...e))):r.headers=new Headers(o));return r};let h=p$1=>{let n=f(y(),N(p$1));for(let o of t){let s="post"===o||"put"===o||"patch"===o;n[o]=m(o,async(p$1,...i)=>{o$3(p$1)&&i.push(p$1)&&(p$1="");let h={...i.pop()};s&&(h=i.length?{...h,body:i.pop()}:{body:h});let{baseURL:f,params:u,...l}=p(o.toUpperCase(),n,n[o],h);return n$1(d(p$1,f,u),l)}),f(n[o],N(p$1?.[o]));}return c(n,a$1)},{assign:f,entries:u,defineProperty:l,defineProperties:c}=Object,m=(t,e)=>l(e,"name",{value:t}),y=()=>({create:m("create",h),with(t){let e=h(this);return t?e.use(t):e},set(t$1){for(let t$1 of t)y$1(this[t$1]);return y$1(this).use(t$1)},use(t){return u(t||{}).forEach(([t,e])=>{l$2(e)||(e=N(e)),"function"==typeof this[t]?f(this[t],e):this[t]=e;}),this},async fetch(o){let{url:s,method:p$1="get",...i}=o,{baseURL:n,params:a,...h}=p(p$1.toUpperCase(),this,this[p$1.toLowerCase()],i,{transform:!1});return n$1(d(s,n,a),h)}});var o=/* @__PURE__ */h();export { N as clone, o as default, h as initapi, a as jsonify };