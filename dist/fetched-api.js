let e={configurable:!1,enumerable:!1,writable:!1},a$4={create:e,with:e,set:e,use:e,get:e,post:e,put:e,patch:e,delete:e,trace:e,connect:e,options:e,head:e},t=["get","post","put","patch","delete","trace","connect","options","head"],r$1=/* @__PURE__ */new Set(["ArrayBuffer","FormData","ReadableStream","SharedArrayBuffer","URLSearchParams"]),i$3=/* @__PURE__ */new Set(["Date","Error","Headers","RegExp","Request","Response","URL","URLSearchParams"]),o$2=/* @__PURE__ */new Set(["ArrayBuffer","AudioData","Blob","CropTarget","CryptoKey","DOMException","DOMMatrix","DOMMatrixReadOnly","DOMPoint","DOMPointReadOnly","DOMQuad","DOMRect","DOMRectReadOnly","File","FileList","FileSystemDirectoryHandle","FileSystemFileHandle","FileSystemHandle","GPUCompilationInfo","GPUCompilationMessage","ImageBitmap","ImageData","Map","RTCCertificate","Set","SharedArrayBuffer","VideoFrame"]);

let i$2=e=>e,n$1=e=>!!e&&"Request"===c$1(e),l$2=e=>!!e&&"Promise"===c$1(e),u$1=e=>!e||"object"!=typeof e&&"function"!=typeof e,f$2=e=>!!e?.ELEMENT_NODE&&"function"==typeof e.cloneNode,s$1=t=>a$3(t)||ArrayBuffer.isView(t)||r$1.has(c$1(t)),a$3=e=>{if(null==e)return !1;let t=c$1(e);return "String"===t||"File"===t||"Blob"===t},c$1=e=>null==e||Number.isNaN(e)?"Null":e.constructor?.name||g.toString.call(e).slice(8,-1),y=e=>u$1(e)?e?.toString():JSON.stringify("Map"===c$1(e)?h$1(e):e[Symbol.iterator]?[...e]:e),N=e=>{if(!e)return [];let t=d$1(e),r=t.length;for(let i=0;i<r;++i)t[i]=[t[i],e[t[i]]];return t},m$1=e=>{if(!e)return {};for(let t of d$1(e))delete e[t];return e},b=e=>{let i;if(E(e))return e;if(p(e))return S(e);if(f$2(e))return e.cloneNode(!0);if(i$3.has(i=c$1(e)))return new e.constructor(e);if(o$2.has(i)||ArrayBuffer.isView(e))return j(e);let o={};for(let t of d$1(e)){let r=e[t];E(r)||(r=b(r)),o[t]=r;}return o},{isArray:p}=Array,{keys:d$1,prototype:g,fromEntries:h$1}=Object,j=globalThis.structuredClone||i$2,E=e=>!e||"object"!=typeof e,S=e=>{let t=e.length,r=Array(t);for(let i=0;i<t;++i){let t=e[i];E(t)||(t=b(t)),r[i]=t;}return r};

let s=(e,t,r)=>{if(!t&&!r)return e;e||="",t||="",r||="",t&&="?"+new URLSearchParams(t);let o=(e.url??e.toString()).trim();o.startsWith("http")&&o.startsWith(r)&&(r=""),o.startsWith("/")&&r.endsWith("/")&&(r=r.slice(0,-1));let s=new URL(r+o+t);return n$1(e)?new Request(s,e):s},a$2=(e,...r)=>{let n=f$1({method:e,transform:"GET"===e||"POST"===e||"OPTIONS"===e},...r,l$1(r),("GET"===e||"HEAD"===e)&&{body:void 0});if(null==n.body||s$1(n.body))return n;let s=n.headers||=new Headers,a=s.get("content-type")?.toLowerCase();return a||s.set("content-type","application/json"),n.body=a?.includes("multipart/form-data")?(s.delete("content-type"),d(n.body)):a?.includes("application/x-www-form-urlencoded")?new URLSearchParams(n.body):y(n.body),n},l$1=t=>{let r={};for(let{headers:n,appendHeaders:o}of t){if(n){if(r.headers)for(let t of(n.entries||(n=N(n)),n))r.headers.set(...t);else r.headers=new Headers(n);}if(o){if(r.headers)for(let t of(o.entries||(o=N(o)),o))r.headers.append(...t);else r.headers=new Headers(o);}}return r},d=e=>{let t=new FormData;if(null==e)return t;for(let n of("object"==typeof e||(e={0:e}),i$1(e))){let s=e[n];a$3(s)||(s=y(s)),t.append(n,s);}return t},{keys:i$1,assign:f$1}=Object;

let r=async(r,a)=>{let{onres:c,onError:s,transform:u,...f}=a,l=await fetch(r,f).catch(i({...f,input:r},s)),d=c?.await||c;if(l.ok){if("function"==typeof d){let t=d(l),r=!l$2(t)||"await"in c?await t:void 0;if(void 0!==r)return r}}else {if("error"in l)return l;let e={status:l.status,statusText:l.statusText},r=Error(o$1(e).filter(i$2).join(" "),{cause:e});return i(l,s)(r)}return n(l,u).catch(i(l,s))},n=async(t,e)=>{if(!e||!t.body||t.bodyUsed)return t;let r=t.headers.get("content-type")?.toLowerCase();if(r?.includes("application/json"))return t.json();let n=await t.text();try{return JSON.parse(n)}catch{return n}},i=(e,r)=>("function"==typeof r||(r=i$2),t=>{(t||="unknown exception while fetching")instanceof Error||(t=Error(t,{cause:e}));let n=setTimeout(()=>console.error("Unhandled (in fetched-api)",t.stack||t),10);return r(a$1(e,"error",{enumerable:!0,configurable:!0,get:()=>(clearTimeout(n),t)}))??e}),{values:o$1,defineProperty:a$1}=Object;

let l=i=>{let p=h(c(),b(i));for(let t$1 of t){let e="post"===t$1||"put"===t$1||"patch"===t$1;p[t$1]=m(t$1,async(i,...s$1)=>{let l=s$1.pop();e&&(l=s$1.length?{...l,body:s$1.pop()}:{body:l});let{baseURL:f,params:h,...a}=a$2(t$1.toUpperCase(),p,p[t$1],{...l});return r(s(i,h,f),a)}),h(p[t$1],b(i?.[t$1]));}return u(p,a$4)},{keys:f,assign:h,defineProperty:a,defineProperties:u}=Object,m=(t,e)=>a(e,"name",{value:t}),c=()=>({create:m("create",l),with(t){let e=l(this);return t?e.use(t):e},set(t$1){for(let t$1 of(m$1(this),t))m$1(this[t$1]);return this.use(t$1)},use(t){for(let e of f(t||{})){let r=t[e];u$1(r)||(r=b(r)),"function"==typeof this[e]?h(this[e],r):this[e]=r;}return this}});

var o=/* @__PURE__ */l();

export { b as clone, o as default, l as initapi, y as jsonify };
