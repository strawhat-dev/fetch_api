let e={configurable:!1,enumerable:!1,writable:!1},t={create:e,with:e,set:e,use:e,get:e,post:e,put:e,patch:e,delete:e,trace:e,connect:e,options:e,head:e},r=/* @__PURE__ */new Set(["ArrayBuffer","FormData","ReadableStream","SharedArrayBuffer","URLSearchParams"]),o=/* @__PURE__ */new Set(["Date","Error","Headers","RegExp","Request","Response","URL","URLSearchParams"]),n=/* @__PURE__ */new Set(["ArrayBuffer","AudioData","Blob","CropTarget","CryptoKey","DOMException","DOMMatrix","DOMMatrixReadOnly","DOMPoint","DOMPointReadOnly","DOMQuad","DOMRect","DOMRectReadOnly","File","FileList","FileSystemDirectoryHandle","FileSystemFileHandle","FileSystemHandle","GPUCompilationInfo","GPUCompilationMessage","ImageBitmap","ImageData","RTCCertificate","SharedArrayBuffer","VideoFrame"]),a=/* @__PURE__ */new Set(["get","post","put","patch","delete","trace","connect","options","head"]),i={100:"Continue",101:"SwitchingProtocols",102:"Processing",103:"EarlyHints",200:"Ok",201:"Created",202:"Accepted",203:"NonAuthoritativeInformation",204:"NoContent",205:"ResetContent",206:"PartialContent",207:"MultiStatus",208:"AlreadyReported",226:"ImUsed",300:"MultipleChoices",301:"MovedPermanently",302:"Found",303:"SeeOther",304:"NotModified",305:"UseProxy",306:"Unused",307:"TemporaryRedirect",308:"PermanentRedirect",400:"BadRequest",401:"Unauthorized",402:"PaymentRequired",403:"Forbidden",404:"NotFound",405:"MethodNotAllowed",406:"NotAcceptable",407:"ProxyAuthenticationRequired",408:"RequestTimeout",409:"Conflict",410:"Gone",411:"LengthRequired",412:"PreconditionFailed",413:"PayloadTooLarge",414:"UriTooLong",415:"UnsupportedMediaType",416:"RangeNotSatisfiable",417:"ExpectationFailed",418:"ImATeapot",421:"MisdirectedRequest",422:"UnprocessableEntity",423:"Locked",424:"FailedDependency",425:"TooEarly",426:"UpgradeRequired",428:"PreconditionRequired",429:"TooManyRequests",431:"RequestHeaderFieldsTooLarge",451:"UnavailableForLegalReasons",500:"InternalServerError",501:"NotImplemented",502:"BadGateway",503:"ServiceUnavailable",504:"GatewayTimeout",505:"HttpVersionNotSupported",506:"VariantAlsoNegotiates",507:"InsufficientStorage",508:"LoopDetected",510:"NotExtended",511:"NetworkAuthenticationRequired"},{isArray:s}=Array,{keys:l,prototype:d,fromEntries:u}=Object,c=e=>null==e||Number.isNaN(e)?"Nullish":e.constructor?.name??d.toString.call(e).slice(8,-1),f=e=>!p(e),p=e=>!e||"object"!=typeof e&&"function"!=typeof e,y=e=>!!e&&"Promise"===c(e),h=e=>!!e&&"Request"===c(e),m=e=>!!e?.ELEMENT_NODE&&"function"==typeof e.cloneNode,b=e=>R(e)||ArrayBuffer.isView(e)||r.has(c(e)),R=e=>{if(null==e)return!1;let t=c(e);return"String"===t||"File"===t||"Blob"===t},g=e=>JSON.stringify("Map"===c(e)?u(e):e?.[Symbol.iterator]?[...e]:e),w=e=>{if(!e)return[];let t=l(e),r=t.length;for(let o=0;o<r;++o)t[o]=[t[o],e[t[o]]];return t},S=e=>{if(M(e))return e;if(m(e))return e.cloneNode(!0);if(s(e))return P(e,Array(e.length));let t=c(e),r=e.constructor;if("Set"===t||"Map"===t)return new r(P([...e]));if(o.has(t))return new r(e);if(n.has(t)||ArrayBuffer.isView(e))return N(e);let a={};for(let t of l(e)){let r=e[t];M(r)||(r=S(r)),a[t]=r}return a},U=e=>{if(!e)return{};for(let t of l(e))delete e[t];return e},M=e=>!e||"object"!=typeof e,N=globalThis.structuredClone||(e=>e),P=(e,t=e)=>{let r=e.length;for(let o=0;o<r;++o){let r=e[o];M(r)||(r=S(r)),t[o]=r}return t},{defineProperty:O}=Object,F=async(e,t,r)=>{r.method||=e.toUpperCase();let{onres:o,onError:n,transform:a,...s}=r,l={...s,input:t},d=await fetch(t,s).catch(A(l,n));if("error"in l)return d;if(d.status in i&&(d.code=i[d.status]),!d.ok){let{status:e="",code:t="UnsuccessfulResponse"}=d,r=Error(`${e} ${t}`.trim(),{cause:{status:e,code:t}});return A(d,n)(r)}let u=o?.await||o;if("function"==typeof u){let e=Symbol(d.code??d.status),t=u(d,l,e),r=!(y(t)&&!("await"in o))&&await t;if(f(r)&&e in r)return r[e]}return a&&d.body&&!d.bodyUsed?d.json().catch(e=>e instanceof SyntaxError?e.message.match(/"(.*)" is not valid JSON$/)?.pop():A(d,n)(e)):d},A=(e,t)=>("function"==typeof t||(t=e=>e),r=>{(r||="Unknown Exception While Fetching...")instanceof Error||(r=Error(r));let o=setTimeout(()=>console.error("Unhandled (in fetched-api)",r.stack||r),10);return t(O(e,"error",{enumerable:!0,configurable:!0,get:()=>(clearTimeout(o),r)})??e)}),{keys:E,assign:D}=Object,T=(e,t,r)=>{if(!t&&!r)return e||"";let o=r?`?${new URLSearchParams(r)}`:"",n=(e?.url||`${e||""}`).trim();n.startsWith("http")&&n.startsWith(t)&&(t=""),n.startsWith("/")&&t?.endsWith("/")&&(t=t.slice(0,-1));let a=new URL((t||"")+n+o);return h(e)?new Request(a,e):a},C=(e,...t)=>{let r=D({transform:"get"===e||"post"===e||"options"===e},...t,("get"===e||"head"===e)&&{body:void 0});if(null==r.body||b(r.body))return r;let o=r.headers??=new Headers,n=o.get("content-type");return n||o.set("content-type","application/json"),r.body=/multipart\/form-data/i.test(n)?(o.delete("content-type"),q(r.body)):/application\/x-www-form-urlencoded/i.test(n)?new URLSearchParams(r.body):g(r.body),r},L=(...e)=>{let t={};for(let{headers:r,appendHeaders:o}of e){if(r){if(t.headers)for(let e of(r.entries||(r=w(r)),r))t.headers.set(...e);else t.headers=new Headers(r)}if(o){if(t.headers)for(let e of(o.entries||(o=w(o)),o))t.headers.append(...e);else t.headers=new Headers(o)}}return t},q=e=>{let t=new FormData;if(null==e)return t;for(let r of("object"==typeof e||(e={0:e}),E(e))){let o=e[r];R(o)||(o=g(o)),t.append(r,o)}return t},x=e=>{let r=j(k(),S(e));for(let t of a){let o=e?.[t],n="post"===t||"put"===t||"patch"===t;r[t]=I(t,(e,...o)=>{let a=o.pop();n&&(o.length?a.body=o.pop():a={body:a});let i=L(r,r[t],a??{}),{baseURL:s,params:l,...d}=C(t,r,r[t],a,i);return F(t,T(e,s,l),d)}),j(r[t],S(o))}return H(r,t)},{keys:B,assign:j,defineProperty:v,defineProperties:H}=Object,I=(e,t)=>v(t,"name",{value:e}),k=()=>({create:I("create",x),with(e){let t=x(this);return e?t.use(e):t},set(e){for(let e of(U(this),a))U(this[e]);return this.use(e)},use(e){for(let t of B(e||{})){let r=e[t];p(r)||(r=S(r)),"function"==typeof this[t]?j(this[t],r):this[t]=r}return this}});var G=/* @__PURE__ */x();export{S as clone,G as default,x as initapi,g as jsonify,c as type};
