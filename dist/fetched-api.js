let e={configurable:!1,enumerable:!1,writable:!1},t={create:e,with:e,set:e,use:e,get:e,post:e,put:e,patch:e,delete:e,trace:e,connect:e,options:e,head:e},r=/* @__PURE__ */new Set(["ArrayBuffer","FormData","ReadableStream","SharedArrayBuffer","URLSearchParams"]),a=/* @__PURE__ */new Set(["Date","Error","Headers","RegExp","Request","Response","URL","URLSearchParams"]),E=/* @__PURE__ */new Set(["ArrayBuffer","AudioData","Blob","CropTarget","CryptoKey","DOMException","DOMMatrix","DOMMatrixReadOnly","DOMPoint","DOMPointReadOnly","DOMQuad","DOMRect","DOMRectReadOnly","File","FileList","FileSystemDirectoryHandle","FileSystemFileHandle","FileSystemHandle","GPUCompilationInfo","GPUCompilationMessage","ImageBitmap","ImageData","RTCCertificate","SharedArrayBuffer","VideoFrame"]),n=/* @__PURE__ */new Set(["get","post","put","patch","delete","trace","connect","options","head"]),o={100:"CONTINUE",101:"SWITCHING_PROTOCOLS",102:"PROCESSING",103:"EARLY_HINTS",200:"OK",201:"CREATED",202:"ACCEPTED",203:"NON_AUTHORITATIVE_INFORMATION",204:"NO_CONTENT",205:"RESET_CONTENT",206:"PARTIAL_CONTENT",207:"MULTI_STATUS",208:"ALREADY_REPORTED",226:"IM_USED",300:"MULTIPLE_CHOICES",301:"MOVED_PERMANENTLY",302:"FOUND",303:"SEE_OTHER",304:"NOT_MODIFIED",305:"USE_PROXY",306:"UNUSED",307:"TEMPORARY_REDIRECT",308:"PERMANENT_REDIRECT",400:"BAD_REQUEST",401:"UNAUTHORIZED",402:"PAYMENT_REQUIRED",403:"FORBIDDEN",404:"NOT_FOUND",405:"METHOD_NOT_ALLOWED",406:"NOT_ACCEPTABLE",407:"PROXY_AUTHENTICATION_REQUIRED",408:"REQUEST_TIMEOUT",409:"CONFLICT",410:"GONE",411:"LENGTH_REQUIRED",412:"PRECONDITION_FAILED",413:"PAYLOAD_TOO_LARGE",414:"URI_TOO_LONG",415:"UNSUPPORTED_MEDIA_TYPE",416:"RANGE_NOT_SATISFIABLE",417:"EXPECTATION_FAILED",418:"IM_A_TEAPOT",421:"MISDIRECTED_REQUEST",422:"UNPROCESSABLE_ENTITY",423:"LOCKED",424:"FAILED_DEPENDENCY",425:"TOO_EARLY",426:"UPGRADE_REQUIRED",428:"PRECONDITION_REQUIRED",429:"TOO_MANY_REQUESTS",431:"REQUEST_HEADER_FIELDS_TOO_LARGE",451:"UNAVAILABLE_FOR_LEGAL_REASONS",500:"INTERNAL_SERVER_ERROR",501:"NOT_IMPLEMENTED",502:"BAD_GATEWAY",503:"SERVICE_UNAVAILABLE",504:"GATEWAY_TIMEOUT",505:"HTTP_VERSION_NOT_SUPPORTED",506:"VARIANT_ALSO_NEGOTIATES",507:"INSUFFICIENT_STORAGE",508:"LOOP_DETECTED",510:"NOT_EXTENDED",511:"NETWORK_AUTHENTICATION_REQUIRED"},i=e=>{let t=T(e);if(f(e))return e;if(Array.isArray(e))return e.map(i);if("Set"===t)return new Set([...e].map(i));if("Map"===t)return new Map([...e].map(i));if(a.has(t))return new e.constructor(e);if(E.has(t)||ArrayBuffer.isView(e))return O(e);let r="function"==typeof e?e.bind({}):{};for(let t of Object.keys(e)){let a=e[t];f(a)||(a=i(a)),r[t]=a}return r},s=e=>{if(!e)return{};for(let t of Object.keys(e))delete e[t];return e},O=globalThis.structuredClone||(e=>e),T=e=>Object.prototype.toString.call(e).slice(8,-1),l=e=>JSON.stringify("Map"===T(e)?Object.fromEntries(e):e?.[Symbol.iterator]?[...e]:e),R=e=>_(e)||ArrayBuffer.isView(e)||r.has(T(e)),f=e=>!e||"object"!=typeof e&&"function"!=typeof e,u=e=>!!e&&"Promise"===T(e),c=e=>!!e&&"Request"===T(e),_=e=>{if("string"==typeof e)return!0;if(!e)return!1;let t=T(e);return"File"===t||"Blob"===t},A=(e,t,r)=>{if(!t&&!r)return e||"";let a=r?`?${new URLSearchParams(r)}`:"",E=(e?.url||`${e||""}`).trim();return(E.startsWith("http")&&E.startsWith(t)&&(t=""),E&&t)?I(`${t=t.replace(/\/+$/,"")}/${E=E.replace(/^\/+/,"")}${a}`,e):I(`${t||E}${a}`,e)},N=(e,...t)=>{let r=Object.assign({transform:"get"===e||"post"===e||"options"===e},...t,("get"===e||"head"===e)&&{body:void 0});if(null==r.body||R(r.body))return r;let a=r.headers??=new Headers,E=a.get("content-type");return E||a.set("content-type","application/json"),r.body=/multipart\/form-data/.test(E)?(a.delete("content-type"),D(r.body)):/application\/x-www-form-urlencoded/.test(E)?new URLSearchParams(r.body):l(r.body),r},p=(...e)=>{let t={};for(let{headers:r,appendHeaders:a}of e){if(r){if(t.headers)for(let e of("entries"in r||(r=Object.entries(r)),r))t.headers.set(...e);else t.headers=new Headers(r)}if(a){if(t.headers)for(let e of("entries"in a||(a=Object.entries(a)),a))t.headers.append(...e);else t.headers=new Headers(a)}}return t},I=(e,t)=>{let r=new URL(e);return c(t)?new Request(r,t):r},D=e=>{let t=new FormData;if(null==e)return t;for(let r of("object"==typeof e||(e={0:e}),Object.keys(e))){let a=e[r];_(a)||(a=l(a)),t.append(r,a)}return t},d=async(e,t,r)=>{r.method||=e.toUpperCase();let{onres:a,onError:E,transform:n,...i}=r,s={...i,input:t},O=await fetch(t,i).catch(S(s,E));if("error"in s)return O;if(O.statusMessage=o[O.status]??O.statusText,!O.ok)return S(O,E)(`${O.status} ${O.statusMessage}`.trim());let T=a?.await||a;if("function"==typeof T){let e=T(O,s),t=u(e)&&!("await"in a),r=t?void 0:await e;if(void 0!==r)return r}return n&&O.body&&!O.bodyUsed?O.clone().json().catch(()=>O.text()):O},S=(e,t)=>("function"==typeof t||(t=e=>e),r=>{(r||="Unknown Exception While Fetching...")instanceof Error||(r=Error(r));let a=setTimeout(()=>{console.error("Unhandled (in fetched-api)",r.stack||r)},10);return t(Object.defineProperty(e,"error",{enumerable:!0,configurable:!0,get:()=>(clearTimeout(a),r)})??e)}),U=e=>{let r=y();for(let t of(e&&Object.assign(r,i(e)),n)){let a="post"===t||"put"===t||"patch"===t;r[t]=(e,...E)=>{let n=E.pop()||{};a&&(n.body??=E.pop()??"");let o=p(r,r[t],n),{baseURL:i,query:s,...O}=N(t,r,r[t],n,o);return d(t,A(e,i,s),O)},e?.[t]&&Object.assign(r[t],i(e[t]))}return Object.defineProperties(r,t)},y=()=>({create:U,with(e){let t=U(this);return e?t.use(e):t},set(e){for(let e of(s(this),n))s(this[e]);return this.use(e)},use(e){for(let t of Object.keys(e||{})){let r=e[t];f(r)||(r=i(r));let a="function"==typeof this[t];a?Object.assign(this[t],r):this[t]=r}return this}});var h=/* @__PURE__ */U();export{i as clone,h as default,U as initapi};
