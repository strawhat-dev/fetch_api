let e=(e,t)=>{for(let[r,n]of(t||([e,t]=[{},e]),Object.entries(t)))"function"==typeof n&&Object.defineProperty(n,"name",{value:r}),Object.defineProperty(e,r,{value:n});return e},t=e=>{for(let t of Object.keys(e||={}))delete e[t];return e},r=e=>{if(u(e))return e?.toString();let t=a(e);return"Set"===t&&(e=[...e]),"Map"===t&&(e=Object.fromEntries(e)),JSON.stringify(e)},n=e=>{let t=a(e);if(u(e))return e;if(Array.isArray(e))return e.map(n);if("RegExp"===t)return new RegExp(e);if("Date"===t)return new Date(e);if("Set"===t)return new Set(n([...e]));if("Map"===t)return new Map(n([...e]));if(e instanceof Blob||t.endsWith("ArrayBuffer")||ArrayBuffer.isView(e))return i(e);let r={};for(let t in e){if(!Object.hasOwn(e,t))continue;let i=e[t];u(i)||(i=n(i)),r[t]=i}return r},i=globalThis.structuredClone||(e=>e),a=e=>Object.prototype.toString.call(e).slice(8,-1),o=e=>"Request"===a(e),s=e=>"Headers"===a(e),f=e=>"Promise"===a(e),u=e=>!e||"object"!=typeof e,l=e=>"string"==typeof e||e instanceof Blob,c=e=>{let t=a(e);return!!("FormData"===t||"ReadableStream"===t||"URLSearchParams"===t||t.endsWith("ArrayBuffer")||ArrayBuffer.isView(e))||l(e)},p=async(e,t,r)=>{let{transform:n,onres:i,onError:a=n?e=>e:void 0,...o}=r;o.method||=e.toUpperCase();let s=i?.await||i,u={...o,input:t},l=await fetch(t,o).catch(a&&(e=>a(Object.assign(u,{error:e}))));if("error"in u)return l;if("function"==typeof s){let e=s(l,u),t=!("await"in i)&&f(e),r=t?void 0:await e;if(void 0!==r)return r}return n?l.json?.():l},d=(e,t,r)=>{let n=r?new URLSearchParams(r).toString():"";if(!t)return`${e||""}${n}`;if(!e)return`${t||""}${n}`;let i=o(e),a=(i?e.url:e.toString()).trim();n&&!a.endsWith("?")&&(a+="?");let s=new URL(`${t}${a}${n}`);return i?new Request(s,e):s},h=(...e)=>{let t=e.reduce(w,{transform:!0});if(null==t.body||c(t.body))return t;let n=t.headers??=new Headers,i=n.get("content-type");return i||n.set("content-type","application/json"),t.body=/multipart[/]form-data/i.test(i)?(n.delete("content-type"),b(t.body)):/application[/]x-www-form-urlencoded/i.test(i)?new URLSearchParams(t.body):r(t.body),t},y=(e,t,r="set")=>{let n=t;for(let t of(s(n)?n=n.entries():Array.isArray(n)||(n=Object.entries(n)),n))e[r](...t);return e},b=e=>{let t=new FormData;if(null==e)return t;for(let[n,i]of("object"==typeof e||(e={0:e}),Object.entries(e)))l(i)||(i=r(i)),t.append(n,i);return t},w=(e,{headers:t,appendHeaders:r,...n}={})=>((t||r)&&(e.headers??=new Headers,t&&y(e.headers,t),r&&y(e.headers,r,"append")),Object.assign(e,n)),g=/* @__PURE__ */new Set(["get","post","put","patch","head","options","connect","trace","delete"]),m=(t={})=>{let r=j();for(let e of g)"post"===e||"put"===e||"patch"===e?r[e]=function(t,r,n={}){n.body=r;let{baseURL:i,query:a,...o}=h(this,this[e],n),s=d(t,i?.trim(),a);return p(e,s,o)}:r[e]=function(t,r={}){let{baseURL:n,query:i,...a}=h(this,this[e],r),o=d(t,n?.trim(),i);return p(e,o,a)},t[e]&&Object.assign(r[e],n(t[e]));return e(n(t),r)},j=()=>({create:m,configure(e){let t;for(t in e){let r=e[t];u(r)||(r=n(r));let i="function"==typeof this[t];i?Object.assign(this[t],r):this[t]=r}return this},with(e){let t=m(this);return e?t.configure(e):t},set(e){for(let e of(t(this),g))t(this[e]);return this.configure(e)}});var O=/* @__PURE__ */m();export{O as default,m as initapi};
