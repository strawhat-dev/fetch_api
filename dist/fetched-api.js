let e={configurable:!1,enumerable:!1,writable:!1},t={create:e,with:e,set:e,configure:e,get:e,post:e,put:e,patch:e,delete:e,options:e,head:e,trace:e,connect:e},r=/* @__PURE__ */new Set(["get","post","put","patch","delete","options","head","trace","connect"]),n=/* @__PURE__ */new Set(["URLSearchParams","ReadableStream","FormData","ArrayBuffer","SharedArrayBuffer"]),a=/* @__PURE__ */new Set(["Date","Error","Headers","RegExp","Request","Response","URL","URLSearchParams"]),o=/* @__PURE__ */new Set(["ArrayBuffer","AudioData","Blob","CropTarget","CryptoKey","DOMException","DOMMatrix","DOMMatrixReadOnly","DOMPoint","DOMPointReadOnly","DOMQuad","DOMRect","DOMRectReadOnly","File","FileList","FileSystemDirectoryHandle","FileSystemFileHandle","FileSystemHandle","GPUCompilationInfo","GPUCompilationMessage","ImageBitmap","ImageData","RTCCertificate","SharedArrayBuffer","VideoFrame"]),i=e=>{let t=l(e);if(d(e))return e;if(Array.isArray(e))return e.map(i);if(e instanceof Node)return e.cloneNode(!0);if("Set"===t)return new Set([...e].map(i));if("Map"===t)return new Map([...e].map(i));if(a.has(t))return new e.constructor(e);if(o.has(t)||ArrayBuffer.isView(e))return f(e);let r="function"==typeof e?e.bind({}):{};for(let t of Object.keys(e)){let n=e[t];d(n)||(n=i(n)),r[t]=n}return r},s=e=>{if(!e)return{};for(let t of Object.keys(e))delete e[t];return e},f=globalThis.structuredClone||(e=>e),l=e=>Object.prototype.toString.call(e).slice(8,-1),c=e=>JSON.stringify("Map"===l(e)?Object.fromEntries(e):e?.[Symbol.iterator]?[...e]:e),u=e=>h(e)||ArrayBuffer.isView(e)||n.has(l(e)),d=e=>!e||!("object"==typeof e||"function"==typeof e),p=e=>!!e&&"Promise"===l(e),y=e=>!!e&&"Request"===l(e),h=e=>{if("string"==typeof e)return!0;if(!e)return!1;let t=l(e);return"File"===t||"Blob"===t},b=(e,t,r)=>{if(!t&&!r)return e||"";let n=r?`?${new URLSearchParams(r)}`:"",a=(e?.url||`${e||""}`).trim();return(a.startsWith("http")&&a.startsWith(t)&&(t=""),a&&t)?O(`${t=t.replace(/\/+$/,"")}/${a=a.replace(/^\/+/,"")}${n}`,e):O(`${t||a}${n}`,e)},m=(e,...t)=>{let r=Object.assign({transform:"get"===e||"post"===e||"options"===e},...t);if(null==r.body||u(r.body))return r;let n=r.headers??=new Headers,a=n.get("content-type");return a||n.set("content-type","application/json"),r.body=/multipart\/form-data/.test(a)?(n.delete("content-type"),g(r.body)):/application\/x-www-form-urlencoded/.test(a)?new URLSearchParams(r.body):c(r.body),r},w=(...e)=>{let t={};for(let{headers:r,appendHeaders:n}of e){if(r){if(t.headers)for(let e of(r.entries||(r=Object.entries(r)),r))t.headers.set(...e);else t.headers=new Headers(r)}if(n){if(t.headers)for(let e of(n.entries||(n=Object.entries(n)),n))t.headers.append(...e);else t.headers=new Headers(n)}}return t},O=(e,t)=>{let r=new URL(e);return y(t)?new Request(r,t):r},g=e=>{let t=new FormData;if(null==e)return t;for(let r of("object"==typeof e||(e={0:e}),Object.keys(e))){let n=e[r];t.append(r,h(n)?n:c(n))}return t},S=async(e,t,r)=>{r.method||=e.toUpperCase();let{onres:n,onError:a,transform:o,...i}=r,s={...i,input:t},f=await fetch(t,i).catch(R(s,a));if("error"in s)return f??s;if(!f.ok)return R(f,a)(Error(`Received Status: ${f.status} ${f.statusText}`));let l=n?.await||n;if("function"==typeof l){let e=l(f,s),t=p(e)&&!("await"in n),r=t?void 0:await e;if(void 0!==r)return r}return o&&f.body&&!f.bodyUsed?f.clone().json().catch(()=>f.text().catch(R(f,a))):f},R=(e,t)=>("function"==typeof t||(t=e=>e),r=>{(r||="An Unknown Error Has Occured")instanceof Error||(r=Error(r));let n=setTimeout(()=>{console.error("Unhandled (in fetched-api)",r.stack||r)},10);return t(Object.defineProperty(e||{},"error",{enumerable:!0,configurable:!0,get:()=>(clearTimeout(n),r)}))}),j=e=>{let n=D();for(let t of r)"post"===t||"put"===t||"patch"===t?n[t]=(e,r,a)=>{(a||={}).body=r;let o=w(n,n[t],a),{baseURL:i,query:s,...f}=m(t,n,n[t],a,o),l=b(e,i,s);return S(t,l,f)}:n[t]=(e,r)=>{let a=w(n,n[t],r||{}),{baseURL:o,query:i,...s}=m(t,n,n[t],r,a),f=b(e,o,i);return S(t,f,s)},e?.[t]&&Object.assign(n[t],i(e[t]));return Object.defineProperties(n,t),e&&Object.assign(n,i(e)),n},D=()=>({create:j,with(e){let t=j(this);return e?t.configure(e):t},set(e){for(let e of(s(this),r))s(this[e]);return this.configure(e)},configure(e){for(let t of Object.keys(e||{})){let r=e[t];d(r)||(r=i(r));let n="function"==typeof this[t];n?Object.assign(this[t],r):this[t]=r}return this}});var M=/* @__PURE__ */j();export{i as clone,M as default,j as initapi};
