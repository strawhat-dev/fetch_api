let e={configurable:!1,enumerable:!1,writable:!1},a$3={create:e,with:e,set:e,use:e,get:e,post:e,put:e,patch:e,delete:e,trace:e,connect:e,options:e,head:e},t=["get","post","put","patch","delete","trace","connect","options","head"],r$1=/* @__PURE__ */new Set(["ArrayBuffer","FormData","ReadableStream","SharedArrayBuffer","URLSearchParams"]),i$1=/* @__PURE__ */new Set(["Date","Error","Headers","RegExp","Request","Response","URL","URLSearchParams"]),o$4=/* @__PURE__ */new Set(["ArrayBuffer","AudioData","Blob","CropTarget","CryptoKey","DOMException","DOMMatrix","DOMMatrixReadOnly","DOMPoint","DOMPointReadOnly","DOMQuad","DOMRect","DOMRectReadOnly","File","FileList","FileSystemDirectoryHandle","FileSystemFileHandle","FileSystemHandle","GPUCompilationInfo","GPUCompilationMessage","ImageBitmap","ImageData","Map","RTCCertificate","Set","SharedArrayBuffer","VideoFrame"]);
let o$3=e=>e,n$2=e=>!!e&&"Request"===f$1(e),l$2=e=>!!e&&"Promise"===f$1(e),s$1=e=>!e||"object"!=typeof e&&"function"!=typeof e,c$1=e=>!!e?.ELEMENT_NODE&&"function"==typeof e.cloneNode,u$1=t=>a$2(t)||ArrayBuffer.isView(t)||r$1.has(f$1(t)),a$2=e=>null!=e&&["String","File","Blob"].includes(f$1(e)),f$1=e=>null==e||Number.isNaN(e)?"null":e.constructor?.name||g.toString.call(e).slice(8,-1),y=e=>s$1(e)?e?.toString():JSON.stringify("Map"===f$1(e)?h$2(e):e[Symbol.iterator]?[...e]:e),d$1=e=>{if(!e)return {};for(let t of b(e))delete e[t];return e},m$1=e=>E(e)?e:N(e)?S(e):c$1(e)?e.cloneNode(!0):i$1.has(f$1(e))?new e.constructor(e):o$4.has(f$1(e))||ArrayBuffer.isView(e)?j(e):p$1(e).reduce((e,[t,r])=>(E(r)||(r=m$1(r)),e[t]=r,e),{}),{isArray:N}=Array,{keys:b,entries:p$1,prototype:g,fromEntries:h$2}=Object,j=globalThis.structuredClone||o$3,E=e=>!e||"object"!=typeof e,S=e=>{let t=e.length,r=Array(t);for(let o=0;o<t;++o){let t=e[o];E(t)||(t=m$1(t)),r[o]=t;}return r};
let{isArray:s}=Array,{entries:n$1,assign:o$2}=Object,d=(e,t,a)=>{if(!((t||="")||a))return e;let s=((e||="").url??e.toString()).trim();(s.startsWith("http://")||s.startsWith("https://"))&&([t,s]=[s,t]);let n=new URL(s,t);return a&&(n.search+=(n.search.startsWith("?")?"&":"?")+a),n$2(e)?new Request(n,e):n},p=(t,...r)=>{let s=o$2({method:t,transform:"GET"===t||"POST"===t||"OPTIONS"===t},...r,h$1(r),("GET"===t||"HEAD"===t)&&{body:null});if(null==s.body||u$1(s.body))return s;let n=s.headers||=new Headers,d=n.get("content-type")?.toLowerCase();return d||n.set("content-type","application/json"),s.body=d?.includes("multipart/form-data")?(n.delete("content-type"),l$1(s.body)):d?.includes("application/x-www-form-urlencoded")?new URLSearchParams(s.body):y(s.body),s},h$1=e=>{let t={};for(let{params:r,headers:a,appendHeaders:o}of e)r&&(t.params?(s(r)||(r=new URLSearchParams(r).entries()),r.forEach(e=>t.params.set(...e))):t.params=new URLSearchParams(r)),a&&(t.headers?(s(a)||(a=n$1(a)),a.forEach(e=>t.headers.set(...e))):t.headers=new Headers(a)),o&&(t.headers?(s(o)||(o=n$1(o)),o.forEach(e=>t.headers.append(...e))):t.headers=new Headers(o));return t},l$1=e=>("object"==typeof(e??={})||(e={data:e}),n$1(e).reduce((e,[r,s])=>(a$2(s)||(s=y(s)),e.append(r,s),e),new FormData));
let{values:r,defineProperty:n}=Object,o$1=async(t,n)=>{let{onres:o,onError:c,transform:s,...u}=n,l=await fetch(t,u).catch(a$1({...u,input:t},c)),f=o?.await||o;if(l.ok){if("function"==typeof f){let t=f(l),r=!l$2(t)||"await"in o?await t:void 0;if(void 0!==r)return r}}else {if("error"in l)return l;let t={status:l.status,statusText:l.statusText},e=Error(r(t).filter(Boolean).join(" "),{cause:t});return a$1(l,c)(e)}return i(l,s).catch(a$1(l,c))},i=async(t,e)=>{if(!e||!t.body||t.bodyUsed)return t;let r=t.headers.get("content-type")?.toLowerCase();if(r?.includes("application/json"))return t.json();let n=await t.text();try{return JSON.parse(n)}catch{return n}},a$1=(e,r)=>("function"==typeof r||(r=o$3),t=>{(t||="unknown exception while fetching")instanceof Error||(t=Error(t,{cause:e}));let o=setTimeout(()=>console.error("Unhandled (in fetched-api)",t.stack||t),10);return r(n(e,"error",{enumerable:!0,configurable:!0,get:()=>(clearTimeout(o),t)}))??e});
let l=i=>{let p$1=h(c(),m$1(i));for(let r of t){let o="post"===r||"put"===r||"patch"===r;p$1[r]=m(r,async(i,...s)=>{let l={...s.pop()};o&&(l=s.length?{...l,body:s.pop()}:{body:l});let{baseURL:f,params:h,...a}=p(r.toUpperCase(),p$1,p$1[r],l);return o$1(d(i,f,h),a)}),h(p$1[r],m$1(i?.[r]));}return u(p$1,a$3)},{keys:f,assign:h,defineProperty:a,defineProperties:u}=Object,m=(t,e)=>a(e,"name",{value:t}),c=()=>({create:m("create",l),with(t){let e=l(this);return t?e.use(t):e},set(t$1){for(let t$1 of(d$1(this),t))d$1(this[t$1]);return this.use(t$1)},use(t){for(let e of f(t||{})){let r=t[e];s$1(r)||(r=m$1(r)),"function"==typeof this[e]?h(this[e],r):this[e]=r;}return this}});
var o=/* @__PURE__ */l();
export { m$1 as clone, o as default, l as initapi, y as jsonify };
